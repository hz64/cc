<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C CçŒ«è¡¨æƒ…åŒ… - æœ€èŒçš„è¡¨æƒ…åŒ…å¤§å…¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        /* å¤´éƒ¨æ ·å¼ */
        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        h1 {
            font-size: 28px;
            font-weight: 600;
        }

        .subtitle {
            font-size: 14px;
            opacity: 0.9;
            margin-top: 5px;
        }

        /* åˆ†ç±»å¯¼èˆª */
        .category-nav {
            background: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .category-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            gap: 15px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .category-btn {
            padding: 8px 20px;
            border: none;
            background: #f0f2f5;
            border-radius: 20px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .category-btn:hover {
            background: #e1e5eb;
        }

        .category-btn.active {
            background: #667eea;
            color: white;
        }

        /* ä¸»å†…å®¹åŒºåŸŸ */
        .main-content {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 20px;
        }

        /* è¡¨æƒ…åŒ…ç½‘æ ¼ */
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .emoji-item {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .emoji-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 20px rgba(0,0,0,0.12);
        }

        .emoji-img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            display: block;
        }

        .emoji-actions {
            padding: 10px;
            display: flex;
            gap: 10px;
        }

        .action-btn {
            flex: 1;
            padding: 6px 10px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
        }

        .download-btn {
            background: #4CAF50;
            color: white;
        }

        .download-btn:hover {
            background: #45a049;
        }

        .qq-btn {
            background: #12B7F5;
            color: white;
        }

        .qq-btn:hover {
            background: #0da5e0;
        }

        /* æ¨¡æ€æ¡† */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }

        .modal-img {
            max-width: 100%;
            max-height: 70vh;
            display: block;
            margin: 0 auto;
        }

        .close-modal {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.5);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* æç¤ºæ¶ˆæ¯ */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #333;
            color: white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 2000;
        }

        .toast.show {
            opacity: 1;
        }

        /* åŠ è½½åŠ¨ç”» */
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .emoji-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
                gap: 15px;
            }
            
            h1 {
                font-size: 24px;
            }
            
            .category-container {
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <div>
                <h1>ğŸ± C CçŒ«è¡¨æƒ…åŒ…</h1>
                <div class="subtitle">æ”¶é›†å…¨ç½‘æœ€å¯çˆ±çš„C CçŒ«è¡¨æƒ…ï¼Œè®©èŠå¤©æ›´æœ‰è¶£</div>
            </div>
        </div>
    </header>

    <nav class="category-nav">
        <div class="category-container">
            <button class="category-btn active" data-category="all">æ‰€æœ‰å›¾ç‰‡</button>
            <button class="category-btn" data-category="wechat">å¾®ä¿¡è¡¨æƒ…ç³»åˆ—</button>
            <button class="category-btn" data-category="date">æ—¥æœŸå‘½åGIF</button>
            <button class="category-btn" data-category="newYear">æ–°å¹´å¿«ä¹ç³»åˆ—</button>
            <button class="category-btn" data-category="future">æœªæ¥è¡¨æƒ…ç³»åˆ—</button>
            <button class="category-btn" data-category="midAutumn">ä¸­ç§‹å¿«ä¹</button>
            <button class="category-btn" data-category="sports">CCè§‚èµ›ç¯‡</button>
            <button class="category-btn" data-category="olympics">å¥¥è¿ä¼š</button>
            <button class="category-btn" data-category="summer">æš‘æœŸç‰¹ä¾›</button>
            <button class="category-btn" data-category="zero">0_XXXç³»åˆ—</button>
            <button class="category-btn" data-category="dynamic">CCåŠ¨æ€å›¾ç³»åˆ—</button>
            <button class="category-btn" data-category="expression">CCåŠ¨æ€è¡¨æƒ…ç³»åˆ—</button>
            <button class="category-btn" data-category="other">å…¶ä»–å›¾ç‰‡</button>
        </div>
    </nav>

    <main class="main-content">
        <div id="emojiContainer" class="emoji-grid">
            <div class="loading">æ­£åœ¨åŠ è½½è¡¨æƒ…åŒ…...</div>
        </div>
    </main>

    <!-- å›¾ç‰‡é¢„è§ˆæ¨¡æ€æ¡† -->
    <div id="imageModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">Ã—</button>
            <img id="modalImage" class="modal-img" src="" alt="">
        </div>
    </div>

    <!-- æç¤ºæ¶ˆæ¯ -->
    <div id="toast" class="toast"></div>

    <script>
        // è¡¨æƒ…åŒ…æ•°æ®ï¼ŒæŒ‰ç…§åˆ†ç±»ç»„ç»‡
        const emojiData = {
            // å¾®ä¿¡è¡¨æƒ…ç³»åˆ— 001-081 (åªåŒ…å«å®é™…å­˜åœ¨çš„æ–‡ä»¶)
            wechat: Array.from({length: 81}, (_, i) => {
                const num = i + 1;
                const numStr = String(num).padStart(3, '0');
                // å¾®ä¿¡è¡¨æƒ…ç³»åˆ—çš„å“ˆå¸Œå€¼æ˜ å°„
                const hashMap = {
                    '001': '06CEFFE9', '002': 'B25FB9C7', '003': 'A9CD3F5B', '004': '0BA11ABF',
                    '005': '80B99B0A', '006': '6EAF540A', '007': 'B08B270D', '008': '5DAA2708',
                    '009': 'AA346C3E', '010': '7A6668E5', '011': '11610482', '012': '9ECB5C5C',
                    '013': 'EF664839', '014': 'A11261B1', '015': '54560176', '016': '1D2C012D',
                    '017': 'B16C77E7', '018': 'BCDD7D24', '019': '2D67FB83', '020': '67E884AE',
                    '021': '058995C7', '022': 'E249635B', '023': 'F3A63E51', '024': '3C72E6C0',
                    '025': '0B5D581B', '026': '564651E2', '027': '3CEE52CB', '028': '09A9B180',
                    '029': '4274D30B', '030': '78D64EE0', '031': '98928E68', '032': 'F0BC5622',
                    '033': '545AF971', '034': 'C00371C2', '035': 'DAF1E633', '036': '3140AACA',
                    '037': 'A1EB6CB0', '038': '458161FB', '039': 'E4CCDEBD', '040': '8F946723',
                    '041': '2185C025', '042': '5D9191E5', '043': '99F151E1', '044': '251A9A05',
                    '045': '84B42C45', '046': '659AA179', '047': '919BCF9C', '048': '9475F118',
                    '049': '0FD33523', '050': 'FC2BF1B8', '051': '5D0A980A', '052': '39EF5642',
                    '053': '938197E1', '054': 'A32A3865', '055': '7EC8B95B', '056': 'D22137C1',
                    '057': 'BB639752', '058': '207BC9BE', '059': '334FA8CE', '060': '03F1917F',
                    '061': 'DDE40A04', '062': 'B1D0C2D6', '063': 'D5FCE347', '064': 'E33952F2',
                    '065': '06586A57', '066': '4DD41EF0', '067': 'FE3B2991', '068': '7BF21C50',
                    '069': 'B0060DBD', '070': '314638AF', '071': '3F9C8998', '072': '49B1F6AE',
                    '073': 'D69A95BA', '074': '19E07249', '075': 'A4AAC6FF', '076': '25BAB623',
                    '077': '88C45864', '078': '24E02E83', '079': 'CF656146', '080': 'A67785AB',
                    '081': '1CD13A2F'
                };
                const hash = hashMap[numStr] || 'DEFAULT_HASH';
                return {
                    id: num,
                    name: `${numStr}_å¾®ä¿¡è¡¨æƒ…ç³»åˆ—`,
                    src: `img/${numStr}_å¾®ä¿¡è¡¨æƒ…ç³»åˆ—_${hash}.gif`,
                    category: 'wechat'
                };
            }),
            
            // æ—¥æœŸè¡¨æƒ…ç³»åˆ— (åªåŒ…å«å®é™…å­˜åœ¨çš„æ–‡ä»¶)
            date: [
                {id: 188, name: '188_2016-10-05', src: 'img/188_2016-10-05_78BC294E.gif', category: 'date'}
            ],
            
            // æå‰ç¥å¤§å®¶æ–°å¹´å¿«ä¹na__ç³»åˆ— (145-167)
            newYear: Array.from({length: 23}, (_, i) => {
                const num = 145 + i;
                // æ–°å¹´å¿«ä¹ç³»åˆ—çš„å“ˆå¸Œå€¼æ˜ å°„
                const hashMap = {
                    '145': '3AAF367C', '146': 'E3D05B0A', '147': '8D685109', '148': '5ACFCF37',
                    '149': 'E24AA8A8', '150': '2E64BC1D', '151': '4E5AAD6E', '152': 'F8CF631F',
                    '153': 'E464D97A', '154': 'DC24CD74', '155': 'B70EB0C9', '156': '754AABC3',
                    '157': 'ECC708E6', '158': '0C2ECCD1', '159': 'A58554BA', '160': '285983CF',
                    '161': '9DBC2170', '162': '0A7E4DD9', '163': '56813A82', '164': 'B5287E1E',
                    '165': 'C58B1855', '166': 'CA5F6317', '167': 'A57563F2'
                };
                const hash = hashMap[String(num)] || 'DEFAULT_HASH';
                return {
                    id: num,
                    name: `${num}_æå‰ç¥å¤§å®¶æ–°å¹´å¿«ä¹na__`,
                    src: `img/${num}_æå‰ç¥å¤§å®¶æ–°å¹´å¿«ä¹na__${hash}.gif`,
                    category: 'newYear'
                };
            }),
            
            // CCæœªæ¥è¡¨æƒ…ç³»åˆ— (189-208)
            future: Array.from({length: 20}, (_, i) => {
                const num = 189 + i;
                // æœªæ¥è¡¨æƒ…ç³»åˆ—çš„å“ˆå¸Œå€¼æ˜ å°„
                const hashMap = {
                    189: '2FFE6866', 190: 'B65F51E9', 191: 'A04723E8', 192: 'B6BE70F5',
                    193: '7A2D9BF1', 194: '02A7E48F', 195: '2E44C5DF', 196: 'B2BD6BE6',
                    197: 'F2FFCB45', 198: '2BCAB934', 199: 'D6B4293E', 200: '30C03A8A',
                    201: '0E693A31', 202: '424CAFA7', 203: '253AADAB', 204: '3EEBF17D',
                    205: '4887164E', 206: '37B48CF8', 207: '08AB4D4E', 208: '704B32B2'
                };
                const hash = hashMap[num];
                return {
                    id: num,
                    name: `${num}_CCæœªæ¥è¡¨æƒ…ç³»åˆ—`,
                    src: `img/${num}_CCæœªæ¥è¡¨æƒ…ç³»åˆ—_${hash}.gif`,
                    category: 'future'
                };
            }),
            
            // ä¸­ç§‹å¿«ä¹ (209-215)
            midAutumn: [
                {id: 209, name: '209_ä¸­ç§‹å¿«ä¹', src: 'img/209_ä¸­ç§‹å¿«ä¹_37D0A5B8.gif', category: 'midAutumn'},
                {id: 210, name: '210_ä¸­ç§‹å¿«ä¹', src: 'img/210_ä¸­ç§‹å¿«ä¹_B9258003.gif', category: 'midAutumn'},
                {id: 211, name: '211_ä¸­ç§‹å¿«ä¹', src: 'img/211_ä¸­ç§‹å¿«ä¹_C8F5082A.gif', category: 'midAutumn'},
                {id: 212, name: '212_ä¸­ç§‹å¿«ä¹', src: 'img/212_ä¸­ç§‹å¿«ä¹_AAFE14BD.gif', category: 'midAutumn'},
                {id: 213, name: '213_ä¸­ç§‹å¿«ä¹', src: 'img/213_ä¸­ç§‹å¿«ä¹_79796D64.gif', category: 'midAutumn'},
                {id: 214, name: '214_ä¸­ç§‹å¿«ä¹', src: 'img/214_ä¸­ç§‹å¿«ä¹_99C4B24B.gif', category: 'midAutumn'},
                {id: 215, name: '215_ä¸­ç§‹å¿«ä¹', src: 'img/215_ä¸­ç§‹å¿«ä¹_4EDD3CB4.gif', category: 'midAutumn'}
            ],
            
            // CCè§‚èµ›ç¯‡ (216-220)
            sports: [
                {id: 216, name: '216_CCè§‚èµ›ç¯‡', src: 'img/216_CCè§‚èµ›ç¯‡_1D3486FA.gif', category: 'sports'},
                {id: 217, name: '217_CCè§‚èµ›ç¯‡', src: 'img/217_CCè§‚èµ›ç¯‡_DEF874FF.gif', category: 'sports'},
                {id: 218, name: '218_CCè§‚èµ›ç¯‡', src: 'img/218_CCè§‚èµ›ç¯‡_3A23F8CF.gif', category: 'sports'},
                {id: 219, name: '219_CCè§‚èµ›ç¯‡', src: 'img/219_CCè§‚èµ›ç¯‡_FD7BC58F.gif', category: 'sports'},
                {id: 220, name: '220_CCè§‚èµ›ç¯‡', src: 'img/220_CCè§‚èµ›ç¯‡_3108551C.gif', category: 'sports'}
            ],
            
            // å¥¥è¿ä¼š (221-228)
            olympics: [
                {id: 221, name: '221_å¥¥è¿ä¼š', src: 'img/221_å¥¥è¿ä¼š_D7990A98.gif', category: 'olympics'},
                {id: 222, name: '222_å¥¥è¿ä¼š', src: 'img/222_å¥¥è¿ä¼š_DED52F5B.gif', category: 'olympics'},
                {id: 223, name: '223_å¥¥è¿ä¼š', src: 'img/223_å¥¥è¿ä¼š_BBFF65A3.gif', category: 'olympics'},
                {id: 224, name: '224_å¥¥è¿ä¼š', src: 'img/224_å¥¥è¿ä¼š_3D7EC2A1.gif', category: 'olympics'},
                {id: 225, name: '225_å¥¥è¿ä¼š', src: 'img/225_å¥¥è¿ä¼š_F36E8F4D.gif', category: 'olympics'},
                {id: 226, name: '226_å¥¥è¿ä¼š', src: 'img/226_å¥¥è¿ä¼š_F43E6559.gif', category: 'olympics'},
                {id: 227, name: '227_å¥¥è¿ä¼š', src: 'img/227_å¥¥è¿ä¼š_BC213755.gif', category: 'olympics'},
                {id: 228, name: '228_å¥¥è¿ä¼š', src: 'img/228_å¥¥è¿ä¼š_D0564366.gif', category: 'olympics'}
            ],
            
            // æš‘æœŸç‰¹ä¾› (229-239)
            summer: [
                {id: 229, name: '229_æš‘æœŸç‰¹ä¾›', src: 'img/229_æš‘æœŸç‰¹ä¾›_2A9FEE79.gif', category: 'summer'},
                {id: 230, name: '230_æš‘æœŸç‰¹ä¾›', src: 'img/230_æš‘æœŸç‰¹ä¾›_375AC117.gif', category: 'summer'},
                {id: 231, name: '231_æš‘æœŸç‰¹ä¾›', src: 'img/231_æš‘æœŸç‰¹ä¾›_186E778B.gif', category: 'summer'},
                {id: 232, name: '232_æš‘æœŸç‰¹ä¾›', src: 'img/232_æš‘æœŸç‰¹ä¾›_660A16AB.gif', category: 'summer'},
                {id: 233, name: '233_æš‘æœŸç‰¹ä¾›', src: 'img/233_æš‘æœŸç‰¹ä¾›_47D5C072.gif', category: 'summer'},
                {id: 234, name: '234_æš‘æœŸç‰¹ä¾›', src: 'img/234_æš‘æœŸç‰¹ä¾›_2906A23A.gif', category: 'summer'},
                {id: 235, name: '235_æš‘æœŸç‰¹ä¾›', src: 'img/235_æš‘æœŸç‰¹ä¾›_5B1090E2.gif', category: 'summer'},
                {id: 236, name: '236_æš‘æœŸç‰¹ä¾›', src: 'img/236_æš‘æœŸç‰¹ä¾›_8950AD64.gif', category: 'summer'},
                {id: 237, name: '237_æš‘æœŸç‰¹ä¾›', src: 'img/237_æš‘æœŸç‰¹ä¾›_106E2543.gif', category: 'summer'},
                {id: 238, name: '238_æš‘æœŸç‰¹ä¾›', src: 'img/238_æš‘æœŸç‰¹ä¾›_64DC5180.gif', category: 'summer'},
                {id: 239, name: '239_æš‘æœŸç‰¹ä¾›', src: 'img/239_æš‘æœŸç‰¹ä¾›_1FA50FEF.gif', category: 'summer'}
            ],
            
            // 0_XXXç³»åˆ— (240-244)
            zero: [
                {id: 240, name: '240_0_(1)', src: 'img/240_0_(1)_A0F3AC4D.gif', category: 'zero'},
                {id: 241, name: '241_0_(2)', src: 'img/241_0_(2)_BA5782F7.gif', category: 'zero'},
                {id: 242, name: '242_0_(3)', src: 'img/242_0_(3)_0224B330.gif', category: 'zero'},
                {id: 243, name: '243_0_(4)', src: 'img/243_0_(4)_9FCEF2F6.gif', category: 'zero'},
                {id: 244, name: '244_0_', src: 'img/244_0_256798AE.gif', category: 'zero'}
            ],
            
            // CCåŠ¨æ€å›¾ç³»åˆ— (245-322)
            dynamic: Array.from({length: 78}, (_, i) => {
                const num = 245 + i;
                // åŠ¨æ€å›¾ç³»åˆ—çš„å“ˆå¸Œå€¼æ˜ å°„
                const hashMap = {
                    '245': 'BA02C8E7', '246': '00CF9799', '247': 'A4EC51DE', '248': '8A003C06', '249': 'F897A599',
                    '250': 'C0502D25', '251': 'A58ADB37', '252': '81B31BBA', '253': '5FA2CC9C', '254': '2056AA55',
                    '255': '6DA70444', '256': '9298B18D', '257': 'A6FD019A', '258': '376E5246', '259': '6FBCA9AE',
                    '260': '0E28D2FD', '261': 'E14F1131', '262': '9E2C3845', '263': 'B1E0D7EF', '264': '08F10BF9',
                    '265': 'D1D863D6', '266': '8767EF26', '267': '5EC804CD', '268': '30289FE8', '269': '089C0DB3',
                    '270': 'E318EE87', '271': '5DC1A929', '272': 'A2E29B25', '273': '485DEBC0', '274': '8AD0A263',
                    '275': '062AA356', '276': '7B8F07A2', '277': '7347DAB9', '278': 'F96AB9A7', '279': 'F3A9FE30',
                    '280': 'EA6325CE', '281': '982AE1F7', '282': '0775FEA6', '283': 'E3C3479C', '284': 'A382E492',
                    '285': '27A677E5', '286': '5A8C6C2D', '287': '671A77F1', '288': '9F0F5A56', '289': 'B97E0AFF',
                    '290': 'E4607B7E', '291': '592179A4', '292': '59C958FF', '293': '505FA679', '294': '01C11F31',
                    '295': '05E52913', '296': '696DC356', '297': '18F08120', '298': '5360663A', '299': '54105E08',
                    '300': 'ABE34EF0', '301': '35216293', '302': '143299FC', '303': 'ECBFCFA3', '304': '64C6EF23',
                    '305': 'C4334876', '306': 'F9C5E264', '307': 'DA0C66A0', '308': '88E253DA', '309': 'BA20C793',
                    '310': '47FDDD89', '311': 'D1CA7307', '312': '665E09BB', '313': '070E296A', '314': 'AEFA7C6E',
                    '315': '1BC9B086', '316': '5612010E', '317': '45446D8A', '318': 'D26890A4', '319': '21DF6A24',
                    '320': '25D625D7', '321': 'EE2035A0', '322': '78D1AFAC'
                };
                const hash = hashMap[String(num)] || 'DEFAULT_HASH';
                return {
                    id: num,
                    name: `${num}_CCåŠ¨æ€å›¾`,
                    src: `img/${num}_CCåŠ¨æ€å›¾_${hash}.gif`,
                    category: 'dynamic'
                };
            }),
            // CCåŠ¨æ€è¡¨æƒ…ç³»åˆ— (æš‚æ—¶åªåŒ…å«å®é™…å­˜åœ¨çš„æ–‡ä»¶)
            expression: [],
            
            // å…¶ä»–æ–‡ä»¶
            other: [
                {id: 999, name: '05AF02A1.jpeg', src: 'img/05AF02A1.jpeg', category: 'other'}
            ]
        };
        
        // è®¡ç®—allåˆ†ç±»ï¼ŒåŒ…å«æ‰€æœ‰å›¾ç‰‡
        emojiData.all = [];
        Object.values(emojiData).forEach(category => {
            emojiData.all = emojiData.all.concat(category);
        });
        
        let currentCategory = 'all';
        
        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            loadEmoji('all');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–åŠ è½½æ‰€æœ‰å›¾ç‰‡
            initPage();
            
            // ç»‘å®šåˆ†ç±»æŒ‰é’®äº‹ä»¶
            bindCategoryEvents();
        });

        // ç»‘å®šåˆ†ç±»æŒ‰é’®äº‹ä»¶
        function bindCategoryEvents() {
            const categoryBtns = document.querySelectorAll('.category-btn');
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    currentCategory = this.dataset.category;
                    loadEmoji(currentCategory);
                });
            });
        }
        
        // åŠ è½½æŒ‡å®šåˆ†ç±»çš„è¡¨æƒ…åŒ…
        function loadEmoji(category) {
            currentCategory = category;
            renderEmojis();
        }

        // æ¸²æŸ“è¡¨æƒ…åŒ…
        function renderEmojis() {
            const container = document.getElementById('emojiContainer');
            let emojis = [];

            if (currentCategory === 'all') {
                // æ˜¾ç¤ºæ‰€æœ‰è¡¨æƒ…åŒ…
                emojis = Object.values(emojiData).flat();
            } else {
                // æ˜¾ç¤ºç‰¹å®šåˆ†ç±»
                emojis = emojiData[currentCategory] || [];
            }

            container.innerHTML = emojis.map(emoji => `
                <div class="emoji-item" onclick="previewImage('${emoji.src}', '${emoji.name}')">
                    <img src="${emoji.src}" alt="${emoji.name}" class="emoji-img" loading="lazy">
                    <div class="emoji-actions">
                        <button class="action-btn download-btn" onclick="downloadEmoji(event, '${emoji.src}', '${emoji.name}')">
                            <span>â¬‡</span> ä¸‹è½½
                        </button>
                        <button class="action-btn qq-btn" onclick="sendToQQ(event, '${emoji.src}', '${emoji.name}')">
                            <span>ğŸ’¬</span> å‘é€
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // é¢„è§ˆå›¾ç‰‡
        function previewImage(src, name) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            modalImg.src = src;
            modalImg.alt = name;
            modal.style.display = 'flex';
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('imageModal').style.display = 'none';
        }

        // ç‚¹å‡»æ¨¡æ€æ¡†èƒŒæ™¯å…³é—­
        document.getElementById('imageModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        // ä¸‹è½½è¡¨æƒ…åŒ…
        function downloadEmoji(event, src, name) {
            event.stopPropagation();
            
            // åˆ›å»ºä¸´æ—¶é“¾æ¥ä¸‹è½½
            fetch(src)
                .then(response => response.blob())
                .then(blob => {
                    const url = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `${name}.png`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    window.URL.revokeObjectURL(url);
                    showToast('è¡¨æƒ…åŒ…ä¸‹è½½æˆåŠŸï¼');
                })
                .catch(() => {
                    showToast('ä¸‹è½½å¤±è´¥ï¼Œè¯·é‡è¯•');
                });
        }

        // å‘é€åˆ°QQå¥½å‹
        function sendToQQ(event, src, name) {
            event.stopPropagation();
            
            // ç”±äºæµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼Œä¸èƒ½ç›´æ¥å‘é€åˆ°QQ
            // è¿™é‡Œæä¾›å‡ ç§æ›¿ä»£æ–¹æ¡ˆ
            
            // æ–¹æ¡ˆ1ï¼šå¤åˆ¶å›¾ç‰‡é“¾æ¥
            const textArea = document.createElement('textarea');
            textArea.value = src;
            document.body.appendChild(textArea);
            textArea.select();
            document.execCommand('copy');
            document.body.removeChild(textArea);
            
            showToast('å›¾ç‰‡é“¾æ¥å·²å¤åˆ¶ï¼Œå¯ä»¥ç²˜è´´åˆ°QQå‘é€');
            
            // æ–¹æ¡ˆ2ï¼šæ‰“å¼€QQåˆ†äº«é“¾æ¥ï¼ˆéœ€è¦ç”¨æˆ·æ‰‹åŠ¨æ“ä½œï¼‰
            setTimeout(() => {
                if (confirm('æ˜¯å¦æ‰“å¼€QQè¿›è¡Œåˆ†äº«ï¼Ÿ')) {
                    // å°è¯•æ‰“å¼€QQï¼ˆè¿™å–å†³äºç”¨æˆ·çš„è®¾å¤‡ï¼‰
                    window.location.href = 'mqqapi://forward/url?url_prefix=' + encodeURIComponent(src);
                }
            }, 1000);
        }

        // æ˜¾ç¤ºæç¤ºæ¶ˆæ¯
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // é”®ç›˜äº‹ä»¶
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
    </script>
</body>
</html>